# nextj 项目初始化-列表详情查询

创建项目`npx create-next-app@latest `

依赖 fetch 库请求数据`npm install isomorphic-unfetch`

修改 index.js 查询列表数据

```js
import Head from 'next/head'
import Image from 'next/image'
import Link from 'next/link'
import styles from '../styles/Home.module.css'
import fetch from 'isomorphic-unfetch'

export default function Home({ name, posts }) {
	return (
		<div className={styles.container}>
			// 自定义当前页面的头信息
			<Head>
				<title>Create Next App</title>
				<meta
					name="description"
					content="Generated by create next app"
				/>
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<main className={styles.main}>
				name: {name}
				<br />
				posts:
				<ul className="flex flex-col">
					// 列表循环用map
					{posts.map((post) => (
						<li key={post.id} className="mt-4">
							<Link href="/posts/[id]" as={`/posts/${post.id}`}>
								<a className="text-gray-700 text-lg flex items-center">
									<Image
										className="rounded-full"
										src={post.avatarUrl}
										alt={post.title}
										width={48}
										height={48}
									/>
									<span className="ml-4">{post.title}</span>
								</a>
							</Link>
						</li>
					))}
				</ul>
			</main>
			<footer className={styles.footer}></footer>
		</div>
	)
}

export async function getStaticProps() {
	const res = await fetch('https://www.baidu.com/json', {
		headers: {
			'Content-Type': 'application/json',
		},
	})
	const posts = await res.json()
	return {
		props: {
			name: 'John Doe',
			posts: posts.data.list,
		},
	}
}
```

详情页数据查询
/pages/posts/[id].js

```js
import Head from 'next/head'
export default function posts({ post }) {
	return (
		<>
			<Head>
				<title>{post.title}</title>
			</Head>
			<h1 className="text-2xl text-center py-6">{post.title}</h1>
			// 渲染HTML
			<div
				className="container mx-auto"
				dangerouslySetInnerHTML={{ __html: post.content }}
			/>
		</>
	)
}

// 在动态渲染页面中,拿到当前页面的路由参数
export async function getServerSideProps(context) {
	const { id } = context.query
	const res = await fetch(`https://www.baidu.com/json/${id}`)
	const post = await res.json()
	return {
		props: {
			post: post.data,
		},
	}
}
```
